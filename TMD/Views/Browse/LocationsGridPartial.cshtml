@model EntityGridModel<TMD.Model.Sites.Subsite>
@(Html.DataTablesGrid<TMD.Model.Sites.Subsite>(parameterNamePrefix: Model.ParameterNamePrefix,
    columns: builder =>
    {
        builder
            .Custom("State", subsite => Html.ActionLink(subsite.State.Name, Mvc.Browse.StateDetails(subsite.State.Id)))
            .Options(canFilter: true, header: "State or province", filterTitle: "Search states and provinces");
        builder
            .Custom("Site", subsite => Html.ActionLink(subsite.Site.Name, Mvc.Browse.SiteDetails(subsite.Site.Id)))
            .Options(canFilter: true, filterTitle: "Search sites");
        builder
            .Custom("Subsite", subsite => subsite.Site.ContainsSingleSubsite ?
                MvcHtmlString.Create("-")
                : Html.ActionLink(subsite.Name, Mvc.Browse.SiteDetails(subsite.Site.Id)))
                .Options(canFilter: true, filterTitle: "Search subsites");
    },
    rowsPerPage: Model.RowsPerPage,
    dataSource: Model.PageEntities, filteredRowCount: Model.FilteredEntitiesCount, totalRowCount: Model.TotalEntitiesCount))