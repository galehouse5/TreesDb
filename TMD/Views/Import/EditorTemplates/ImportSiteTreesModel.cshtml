@model TMD.Models.ImportSiteTreesModel
<div class="portlet x12 @(Model.Subsites.Count == 1 ? "Site Subsite" : "Site")">        
    <div class="portlet-header Entity-Header Site-Header">
        <h4>@Model.Name</h4>
    </div>
    <div class="portlet-content">
        @Html.HiddenFor(m => m.Id)
        @if (Model.Subsites.Count == 1) {
            @Html.HiddenFor(m => m.Subsites[0].Id)
            for (int i = 0; i < Model.Subsites[0].Trees.Count; i++) {
                if (Model.Subsites[0].Trees[i].IsEditing) {
                    @Html.EditorFor(m => m.Subsites[0].Trees[i])
                } else {
                    @Html.DisplayFor(m => m.Subsites[0].Trees[i])
                }
            }
            <div class="buttonrow">
                @Html.ImportInnerActionButton("Add tree", ImportModelLevel.Subsite, Model.Subsites[0].Id, ImportModelAction.Add, ButtonColor.Orange)
            </div>
        } else {
            for (int i = 0; i < Model.Subsites.Count; i++) {
                @Html.EditorFor(m => m.Subsites[i])
            }
        }
    </div>
</div>
