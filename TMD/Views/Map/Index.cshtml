@model TMD.Models.MapViewportModel
@{ ViewBag.Title = "Map"; Layout = "~/Views/Shared/SiteLayout.cshtml"; }

@section Styles {
    <style type="text/css">
        .MapViewport { position: absolute; top: 0; left: 0; bottom: 0; right: 0; }
        #header { z-index: 100; }
        #nav { z-index: 100; }
    </style>
}

@section Scripts {
    @{ Html.RenderAction(Mvc.Map.InitializeGoogleMaps()); }
    <script type="text/javascript" src="@Links.js.Map.Widgets_js"></script>
    <script type="text/javascript">
        // normalize html structure and css rules
        $(function () {
            var map = $('.MapViewport');
            $('#content').remove();
            $('#footer').remove();
            $('#wrapper').css('margin-bottom', 0).append(map);
            $('body').css('min-height', '0');
            $('.MapViewport').MapViewport();

            var timeout = setTimeout(function () {
                    timeout = null;
                    $('#header').slideUp();
                }, 4000);
                $('#top').hover(
                    function () {
                        if (timeout) { clearTimeout(timeout); timeout = null; }
                        $('#header').slideDown();
                    },
                    function () {
                        timeout = setTimeout(function () {
                            timeout = null;
                            $('#header').slideUp();
                        }, 2000);
                    }
            );
        });
    </script>
}

@{ Html.RenderPartial("MapViewport", Model); }
