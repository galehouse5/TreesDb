<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="TMD.Model"
                   namespace="TMD.Model.ExcelImport">
  <class name="ExcelImportEntity" table="ExcelImport_Entities" lazy="false">
    <id name="ID">
      <generator class="native" />
    </id>
    <discriminator column="EntityTypeID" />
    <many-to-one name="User" column="UserID" />
    <property name="RowIndex" />
    <bag name="Values" cascade="all" inverse="true" fetch="join">
      <key column="EntityID" />
      <one-to-many class="ExcelImportValue" />
    </bag>

    <subclass name="TMD.Model.ExcelImport.Entities.ExcelImportSite" discriminator-value="1" lazy="false" />
    <subclass name="TMD.Model.ExcelImport.Entities.ExcelImportSubsite" discriminator-value="2" lazy="false" />
    <subclass name="TMD.Model.ExcelImport.Entities.ExcelImportTree" discriminator-value="3" lazy="false" />
    <subclass name="TMD.Model.ExcelImport.Entities.ExcelImportTrunk" discriminator-value="4" lazy="false" />
    <subclass name="TMD.Model.ExcelImport.Entities.ExcelImportPhoto" discriminator-value="5" lazy="false" />
  </class>

  <class name="ExcelImportValue" table="ExcelImport_Values" lazy="false">
    <id name="ID">
      <generator class="native" />
    </id>
    <discriminator column="Type"/>
    <property name="AttributeID" />
    <many-to-one name="Entity" column="EntityID" />

    <subclass name="TMD.Model.ExcelImport.Values.ExcelImportFloatValue" discriminator-value="1" lazy="false">
      <property name="FloatValue" />
    </subclass>
    
    <subclass name="TMD.Model.ExcelImport.Values.ExcelImportIntegerValue" discriminator-value="2" lazy="false">
      <property name="IntegerValue" />
    </subclass>

    <subclass name="TMD.Model.ExcelImport.Values.ExcelImportStringValue" discriminator-value="3" lazy="false">
      <property name="StringValue" />
    </subclass>

    <subclass name="TMD.Model.ExcelImport.Values.ExcelImportBooleanValue" discriminator-value="4" lazy="false">
      <property name="BooleanValue" />
    </subclass>

    <subclass name="TMD.Model.ExcelImport.Values.ExcelImportEnumValue" discriminator-value="5" lazy="false">
      <property name="ByteValue" />
    </subclass>
   
    <subclass name="TMD.Model.ExcelImport.Values.ExcelImportDateValue" discriminator-value="6" lazy="false">
      <property name="DateValue" />
    </subclass>
  </class>
</hibernate-mapping>
